(this["webpackJsonpcarbon-tutorial"]=this["webpackJsonpcarbon-tutorial"]||[]).push([[0],{174:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(33),c=a.n(s),l=(a(98),a(6)),r=a(7),o=a(8),d=a(9),u=(a(99),a(178)),j=a(179),h=a(180),b=a(197),y=a(181),x=a(182),m=a(183),O=a(184),p=a(185),v=a(186),f=a(198),g=a(187),N=a(188),w=a(189),k=a(190),C=a(27),_=a(3),S=function(){return Object(_.jsx)(u.a,{render:function(e){var t=e.isSideNavExpanded,a=e.onClickSideNavExpand;return Object(_.jsxs)(j.a,{"aria-label":"Oyster Haven",children:[Object(_.jsx)(h.a,{}),Object(_.jsx)(b.a,{"aria-label":"Open menu",onClick:a,isActive:t}),Object(_.jsx)(y.a,{element:C.b,to:"/",prefix:"",children:"Oyster Haven"}),Object(_.jsx)(x.a,{"aria-label":"Oyster Haven",children:Object(_.jsx)(m.a,{element:C.b,to:"/trends",children:"Trends"})}),Object(_.jsx)(O.a,{"aria-label":"Side navigation",expanded:t,isPersistent:!1,children:Object(_.jsx)(p.a,{children:Object(_.jsx)(v.a,{children:Object(_.jsx)(m.a,{href:"/trends",children:"Trends"})})})}),Object(_.jsxs)(f.a,{children:[Object(_.jsx)(g.a,{"aria-label":"Notifications",children:Object(_.jsx)(N.a,{})}),Object(_.jsx)(g.a,{"aria-label":"User Avatar",children:Object(_.jsx)(w.a,{})}),Object(_.jsx)(g.a,{"aria-label":"App Switcher",children:Object(_.jsx)(k.a,{})})]})]})}})},F=a(196),E=a(25),M=a(195),T=a(199),D=a(191),L=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n.state={title:e.title,fieldname:e.fieldname,fieldvalue:e.fieldvalue,fieldtimestamp:e.fieldtimestamp,fieldunits:e.fieldunits,fieldextra:e.fieldextra,data:e.data,error:null},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("KPI mounted")}},{key:"componentWillUnmount",value:function(){console.log("KPI unmounted")}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"timeSince",value:function(e){console.log("Timestamp: "+e);var t=new Date,a=t.getTime()/1e3-e;if(console.log("Now: "+t.getTime()),console.log("Seconds: "+a),a<60)return parseInt(a)+"s";if(a<3600)return parseInt(a/60)+"m";if(a<=86400)return parseInt(a/3600)+"h";if(a>86400)return parseInt(a/86400)+" days";if(a>86400){var n=e.getDate(),i=e.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ","");return console.log("Month: "+i),n+" "+i+(e.getFullYear()===t.getFullYear()?"":" "+e.getFullYear())}}},{key:"updateFieldValue",value:function(e,t,a){this.setState({fieldvalue:t,fieldtimestamp:a})}},{key:"update",value:function(e){if(console.log("Refreshing KPI Data"),e){console.log(this.state.data);try{var t=JSON.parse(this.state.data);if(t[this.state.fieldname]){console.log("Updating: "+this.state.fieldname);var a="Last Updated "+this.timeSince(t[this.state.fieldname].timestamp)+" ago";this.updateFieldValue(t,t[this.state.fieldname].value,a)}}catch(n){console.log("Could not parse data object")}}else console.log("KPI Data invalid")}},{key:"componentDidUpdate",value:function(e,t,a){t.data!==this.state.data&&this.update(this.state.data)}},{key:"getIcon",value:function(){return Object(_.jsx)(D.a,{})}},{key:"render",value:function(){return Object(_.jsx)("div",{children:Object(_.jsxs)("div",{className:"my-widget-parent",children:[Object(_.jsxs)("div",{className:"my-widget-top",children:[Object(_.jsxs)("div",{className:"my-widget-top-left",children:[Object(_.jsx)("div",{className:"my-widget-title",children:this.state.title&&Object(_.jsx)("div",{children:this.state.title})}),Object(_.jsxs)("div",{className:"my-widget-value",children:[this.state.fieldvalue&&Object(_.jsx)("div",{children:this.state.fieldvalue}),Object(_.jsx)("span",{className:"my-widget-currency",children:this.state.fieldunits&&Object(_.jsx)("div",{children:this.state.fieldunits})})]})]}),Object(_.jsx)("div",{className:"my-widget-top-right",children:this.getIcon()})]}),Object(_.jsxs)("div",{className:"my-widget-bottom",children:[Object(_.jsx)("div",{className:"my-widget-bottom-left",children:this.state.fieldtimestamp&&Object(_.jsx)("div",{children:this.state.fieldtimestamp})}),Object(_.jsx)("div",{className:"my-widget-bottom-right",children:this.state.fieldextra&&Object(_.jsx)("div",{children:this.state.fieldextra})})]})]})})}}]),a}(n.Component);L.defaultProps={title:"KPI",fieldname:"temp",fieldvalue:"N/A",fieldtimestamp:"N/A",fieldunits:"\xba",fieldextra:"",data:""};var W=a(192),H=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"updateFieldValue",value:function(e,t,a){var n=" - ",i="0";if(e.windd){var s=e.windd.value;n=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][Math.round(s/22.5,0)+1]}e.windgust&&(i=e.windgust.value);var c="".concat(n," Gusting at ").concat(i," mph");this.setState({fieldvalue:t,fieldtimestamp:a,fieldextra:c})}},{key:"getIcon",value:function(){return Object(_.jsx)(W.a,{})}}]),a}(L),A=a(193),I=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"getIcon",value:function(){return Object(_.jsx)(A.a,{})}}]),a}(L),P=a(194),U=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"getIcon",value:function(){return Object(_.jsx)(P.a,{})}}]),a}(L),R=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:"",value:0},n.state={data:"",value:0},n}return Object(r.a)(a,[{key:"getLatest",value:function(){var e=this;try{fetch("https://ed4b9t53ua.execute-api.us-east-1.amazonaws.com/prod/latest",{method:"GET",headers:{"x-api-key":"3GoM3QBLwN7XA5sVtN4Hp8IStmRJ3zF35bEFaqvn"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState((function(){return{data:JSON.stringify(t)}}))}))}catch(t){console.log("Error: "+t)}}},{key:"componentDidMount",value:function(){console.log("Landing Page mounted"),this.getLatest()}},{key:"componentWillUnmount",value:function(){console.log("Landing Page unmounted")}},{key:"render",value:function(){return Object(_.jsxs)("div",{className:"bx--grid bx--grid--full-width landing-page",children:[Object(_.jsx)("div",{className:"bx--row landing-page__banner",children:Object(_.jsxs)("div",{className:"bx--col-lg-16",children:[Object(_.jsx)(M.a,{noTrailingSlash:!0,children:Object(_.jsx)(T.a,{children:Object(_.jsx)("a",{href:"/",children:"Current Conditions"})})}),Object(_.jsx)("h1",{className:"landing-page__heading",children:"Oyster Haven"})]})}),Object(_.jsxs)("div",{className:"bx--row landing-page__r3",children:[Object(_.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(_.jsx)(L,{title:"Temperature",fieldname:"temp",fieldunits:"\xba",data:this.state.data})}),Object(_.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(_.jsx)(I,{title:"Relative Humidity",fieldname:"rh",fieldunits:"%",data:this.state.data})}),Object(_.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(_.jsx)(H,{title:"Wind",fieldname:"wind",fieldunits:"mph",data:this.state.data})}),Object(_.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(_.jsx)(U,{title:"Rain",fieldname:"rainfall",fieldunits:'"',data:this.state.data})})]}),Object(_.jsx)("div",{className:"bx--row landing-page__r3",children:Object(_.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(_.jsx)(L,{title:"Water Temperature",fieldname:"watertemp",fieldunits:"\xba",data:this.state.data})})})]})}}]),a}(n.Component),Y=a(87),J=a.n(Y),z=a(90),G=a(88),K=a(10),V=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[{x:0,y:0}],hints:[]},n._onMouseLeave=function(){},n._onNearestX=function(e,t){t.index},n.state={title:e.title,yunits:e.yunits,data:e.data,hints:e.hints,xtitle:e.xtitle,ytitle:e.ytitle,error:null},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("Trend Chart mounted")}},{key:"componentWillUnmount",value:function(){console.log("Trend Chart unmounted")}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data,hints:e.hints,xtitle:e.xtitle,ytitle:e.ytitle,yunits:e.yunits})}},{key:"render",value:function(){var e=this;return Object(_.jsxs)(K.b,{height:300,xType:"time",children:[Object(_.jsx)(K.d,{}),Object(_.jsx)(K.f,{}),Object(_.jsx)(K.g,{title:this.state.xtitle}),Object(_.jsx)(K.h,{title:this.state.ytitle}),Object(_.jsx)(K.e,{data:this.state.data}),this.state.hints.map((function(t,a){return Object(_.jsx)(K.c,{value:t[t.type],children:Object(_.jsxs)("div",{className:"hint",children:[Object(_.jsx)("div",{children:Object(_.jsx)(G.a,{icon:z.a})}),Object(_.jsxs)("div",{children:[t[t.type].y," ",e.state.fieldunits]}),Object(_.jsx)("div",{children:J()(t[t.type].x).format("MM-DD-YYYY h:mm:ss")})]})},t[t.type].x)}))]})}}]),a}(n.Component);V.defaultProps={title:"Trend Chart",xtitle:"N/A",ytitle:"N/A",yunits:"\xba",data:[{x:0,y:0}],hints:[]};var B=V,X=a(13),q=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.data,i=t.marginLeft,s=t.marginTop;if(!n)return null;var c=this._getAttributeFunctor("x"),l=this._getAttributeFunctor("y"),r=this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),o=this._getAttributeFunctor("fill")||this._getAttributeFunctor("color"),d=this._getAttributeFunctor("opacity"),u=.2*Math.abs(c(n[1])-c(n[0]));return Object(_.jsx)("g",{className:"".concat("rv-xy-plot__series rv-xy-plot__series--candlestick"," ").concat(a),transform:"translate(".concat(i,",").concat(s,")"),children:n.map((function(t,a){var n=c(t),i=l(Object(X.a)(Object(X.a)({},t),{},{y:t.yHigh})),s=l(Object(X.a)(Object(X.a)({},t),{},{y:t.yOpen})),j=l(Object(X.a)(Object(X.a)({},t),{},{y:t.yClose})),h=l(Object(X.a)(Object(X.a)({},t),{},{y:t.yLow})),b={stroke:r&&r(t)},y=2*u;return Object(_.jsxs)("g",{transform:"translate(".concat(n,")"),opacity:d?d(t):1,onClick:function(a){return e._valueClickHandler(t,a)},onMouseOver:function(a){return e._valueMouseOverHandler(t,a)},onMouseOut:function(a){return e._valueMouseOutHandler(t,a)},children:[Object(_.jsx)("line",Object(X.a)({x1:-y,x2:y,y1:i,y2:i},b)),Object(_.jsx)("line",Object(X.a)({x1:0,x2:0,y1:i,y2:h},b)),Object(_.jsx)("line",Object(X.a)({x1:-y,x2:y,y1:h,y2:h},b)),Object(_.jsx)("rect",{x:-y,width:Math.max(2*y,0),y:s,height:Math.abs(s-j),fill:o&&o(t)})]},a)}))})}}]),a}(K.a);q.displayName="CandlestickSeries";var Q=q,Z=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={data:[{x:1641042e6,y:32,yHigh:60,yOpen:48,yClose:32,yLow:20,color:"#12939A",opacity:1},{x:16437204e5,y:36,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16461396e5,y:48,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:1648818e6,y:52,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:165141e7,y:65,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16540884e5,y:78,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16566804e5,y:85,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16593588e5,y:89,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16620372e5,y:84,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16646292e5,y:78,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1},{x:16673076e5,y:72,yHigh:52,yOpen:52,yClose:32,yLow:28,color:"#EF5D28",opacity:1}]},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("Trend Chart mounted")}},{key:"componentWillUnmount",value:function(){console.log("Trend Chart unmounted")}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this.state.data;return Object(_.jsx)("div",{className:"candlestick-example",children:Object(_.jsx)("div",{className:"chart",children:Object(_.jsxs)(K.b,{animation:!0,xType:"time",yDomain:[0,100],height:300,children:[Object(_.jsx)(K.g,{}),Object(_.jsx)(K.h,{}),Object(_.jsx)(K.e,{color:"#12939A",data:e}),Object(_.jsx)(K.e,{color:"#FF9833",className:"dashed-example-line",data:[{x:16383636e5,y:25},{x:16698996e5,y:25}]}),Object(_.jsx)(K.e,{color:"#1A3177",className:"dashed-example-line",opacity:.3,data:[{x:16383636e5,y:75},{x:16698996e5,y:75}]}),Object(_.jsx)(Q,{colorType:"literal",opacityType:"literal",stroke:"#79C7E3",data:e})]})})})}}]),a}(i.a.Component),$=Z,ee=a(91),te=[{value:"watertemp",label:"Water Temperature (F)"},{value:"temp",label:"Outside Temperature (F)"},{value:"wind",label:"Wind Speed (mph)"},{value:"waterlight",label:"Water Light (lumens)"}],ae=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:[{x:0,y:0}],hints:[],yunits:"",xtitle:"",ytitle:"",selectedMeasure:"watertemp"},n.handleMeasureChange=function(e){n.setState({selectedMeasure:e.value})},n.state={data:[{x:0,y:0}],hints:[],yunits:"",xtitle:"",ytitle:"",selectedMeasure:"watertemp"},n}return Object(r.a)(a,[{key:"getTrends",value:function(){var e=this;try{var t=new URL("https://ed4b9t53ua.execute-api.us-east-1.amazonaws.com/prod/historical"),a={measure:this.state.selectedMeasure,timeframe:1};Object.keys(a).forEach((function(e){return t.searchParams.append(e,a[e])})),fetch(t,{method:"GET",headers:{"x-api-key":"3GoM3QBLwN7XA5sVtN4Hp8IStmRJ3zF35bEFaqvn"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState((function(){return{data:t.dataset,hints:t.hints,ytitle:t.metadata.ytitle,yunits:t.metadata.yunits,xtitle:"Month to Date"}}))}))}catch(n){console.log("Error: "+n)}}},{key:"componentDidMount",value:function(){console.log("TrendsPage mounted"),this.getTrends()}},{key:"componentDidUpdate",value:function(e,t,a){t.selectedMeasure!==this.state.selectedMeasure&&(console.log("New Measure Selected: "+this.state.selectedMeasure),this.getTrends())}},{key:"componentWillUnmount",value:function(){console.log("Trends Page unmounted")}},{key:"render",value:function(){return Object(_.jsxs)("div",{className:"bx--grid bx--grid--full-width trends-page",children:[Object(_.jsx)("div",{className:"bx--row trends-page__banner",children:Object(_.jsxs)("div",{className:"bx--col-lg-16",children:[Object(_.jsx)("h1",{className:"trends-page__heading",children:"Latest Trends"}),Object(_.jsx)(ee.a,{options:te,onChange:this.handleMeasureChange})]})}),Object(_.jsx)("div",{className:"bx--row trends-page__r3",children:Object(_.jsx)($,{})}),Object(_.jsx)("div",{className:"bx--row trends-page__r3",children:Object(_.jsx)(B,{title:"Temperature",yunits:this.state.yunits,ytitle:this.state.ytitle,xtitle:this.state.xtitle,data:this.state.data,hints:this.state.hints})}),Object(_.jsx)("div",{className:"bx--row trends-page__r3"})]})}}]),a}(n.Component),ne=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(_.jsxs)("div",{children:[Object(_.jsx)(S,{}),Object(_.jsx)(F.a,{children:Object(_.jsxs)(E.c,{children:[Object(_.jsx)(E.a,{exact:!0,path:"/",component:R}),Object(_.jsx)(E.a,{path:"/trends",component:ae})]})})]})}}]),a}(n.Component),ie=ne;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(144),a(157),a(160),a(164),a(167);c.a.render(Object(_.jsx)(C.a,{children:Object(_.jsx)(ie,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},98:function(e,t,a){},99:function(e,t,a){}},[[174,1,2]]]);
//# sourceMappingURL=main.a79c4451.chunk.js.map