(this["webpackJsonpcarbon-tutorial"]=this["webpackJsonpcarbon-tutorial"]||[]).push([[0],{53:function(e,t,a){},54:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a(46),s=a.n(n),l=(a(53),a(13)),c=a(14),d=a(15),r=a(16),o=(a(54),a(99)),j=a(100),u=a(101),h=a(114),b=a(102),m=a(103),v=a(104),f=a(105),x=a(106),O=a(107),p=a(115),g=a(108),y=a(109),N=a(110),w=a(111),S=a(22),k=a(3),E=function(){return Object(k.jsx)(o.a,{render:function(e){var t=e.isSideNavExpanded,a=e.onClickSideNavExpand;return Object(k.jsxs)(j.a,{"aria-label":"Oyster Haven",children:[Object(k.jsx)(u.a,{}),Object(k.jsx)(h.a,{"aria-label":"Open menu",onClick:a,isActive:t}),Object(k.jsx)(b.a,{element:S.b,to:"/",prefix:"",children:"Oyster Haven"}),Object(k.jsx)(m.a,{"aria-label":"Oyster Haven",children:Object(k.jsx)(v.a,{href:"/repos",children:"Trends"})}),Object(k.jsx)(f.a,{"aria-label":"Side navigation",expanded:t,isPersistent:!1,children:Object(k.jsx)(x.a,{children:Object(k.jsx)(O.a,{children:Object(k.jsx)(v.a,{href:"/repos",children:"Trends"})})})}),Object(k.jsxs)(p.a,{children:[Object(k.jsx)(g.a,{"aria-label":"Notifications",children:Object(k.jsx)(y.a,{})}),Object(k.jsx)(g.a,{"aria-label":"User Avatar",children:Object(k.jsx)(N.a,{})}),Object(k.jsx)(g.a,{"aria-label":"App Switcher",children:Object(k.jsx)(w.a,{})})]})]})}})},W=a(113),I=a(17),P=a(112),T=a(116),C=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={},i.state={title:e.title,fieldname:e.fieldname,fieldvalue:e.fieldvalue,fieldtimestamp:e.fieldtimestamp,fieldunits:e.fieldunits,fieldextra:e.fieldextra,data:e.data,error:null},i}return Object(c.a)(a,[{key:"componentDidMount",value:function(){console.log("KPI mounted")}},{key:"componentWillUnmount",value:function(){console.log("KPI unmounted")}},{key:"componentWillReceiveProps",value:function(e){this.setState({data:e.data})}},{key:"timeSince",value:function(e){console.log("Timestamp: "+e);var t=new Date,a=t.getTime()/1e3-e;return console.log("Now: "+t.getTime()),console.log("Seconds: "+a),a<60?parseInt(a)+"s":a<3600?parseInt(a/60)+"m":a<=86400?parseInt(a/3600)+"h":a>86400?e.getDate()+" "+e.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ","")+(e.getFullYear()===t.getFullYear()?"":" "+e.getFullYear()):void 0}},{key:"updateFieldValue",value:function(e,t,a){this.setState({fieldvalue:t,fieldtimestamp:a})}},{key:"update",value:function(e){if(console.log("Refreshing KPI Data"),e){console.log(this.state.data);try{var t=JSON.parse(this.state.data);if(t[this.state.fieldname]){console.log("Updating: "+this.state.fieldname);var a="Last Updated "+this.timeSince(t[this.state.fieldname].timestamp)+" ago";this.updateFieldValue(t,t[this.state.fieldname].value,a)}}catch(i){console.log("Could not parse data object")}}else console.log("KPI Data invalid")}},{key:"componentDidUpdate",value:function(e,t,a){t.data!==this.state.data&&this.update(this.state.data)}},{key:"render",value:function(){return Object(k.jsx)("div",{children:Object(k.jsxs)("div",{className:"my-widget-parent",children:[Object(k.jsxs)("div",{className:"my-widget-top",children:[Object(k.jsxs)("div",{className:"my-widget-top-left",children:[Object(k.jsx)("div",{className:"my-widget-title",children:this.state.title&&Object(k.jsx)("div",{children:this.state.title})}),Object(k.jsxs)("div",{className:"my-widget-value",children:[this.state.fieldvalue&&Object(k.jsx)("div",{children:this.state.fieldvalue}),Object(k.jsx)("span",{className:"my-widget-currency",children:this.state.fieldunits&&Object(k.jsx)("div",{children:this.state.fieldunits})})]})]}),Object(k.jsx)("div",{className:"my-widget-top-right"})]}),Object(k.jsxs)("div",{className:"my-widget-bottom",children:[Object(k.jsx)("div",{className:"my-widget-bottom-left",children:this.state.fieldtimestamp&&Object(k.jsx)("div",{children:this.state.fieldtimestamp})}),Object(k.jsx)("div",{className:"my-widget-bottom-right",children:this.state.fieldextra&&Object(k.jsx)("div",{children:this.state.fieldextra})})]})]})})}}]),a}(i.Component);C.defaultProps={title:"KPI",fieldname:"temp",fieldvalue:"N/A",fieldtimestamp:"N/A",fieldunits:"\xba",fieldextra:"",data:""};var D=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"updateFieldValue",value:function(e,t,a){var i=" - ",n="0";if(e.windd){var s=e.windd.value;i=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][Math.round(s/22.5,0)+1]}e.windgust&&(n=e.windgust.value);var l="".concat(i," Gusting at ").concat(n," mph");this.setState({fieldvalue:t,fieldtimestamp:a,fieldextra:l})}}]),a}(C),F=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={data:"",value:0},i.state={data:"",value:0},i}return Object(c.a)(a,[{key:"getLatest",value:function(){var e=this;try{fetch("https://ed4b9t53ua.execute-api.us-east-1.amazonaws.com/prod/latest",{method:"GET",headers:{"x-api-key":"vbRxp5vnkT1C3sdQZHF8N3E6A7h5F3u552w4Tq3c"}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState((function(){return{data:JSON.stringify(t)}}))}))}catch(t){console.log("Error: "+t)}}},{key:"componentDidMount",value:function(){var e=this;console.log("Landing Page mounted"),this.getLatest(),this.timerID=setInterval((function(){return e.getLatest()}),9e5)}},{key:"componentWillUnmount",value:function(){console.log("Landing Page unmounted")}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"bx--grid bx--grid--full-width landing-page",children:[Object(k.jsx)("div",{className:"bx--row landing-page__banner",children:Object(k.jsxs)("div",{className:"bx--col-lg-16",children:[Object(k.jsx)(P.a,{noTrailingSlash:!0,children:Object(k.jsx)(T.a,{children:Object(k.jsx)("a",{href:"/",children:"Current Conditions"})})}),Object(k.jsx)("h1",{className:"landing-page__heading",children:"Oyster Haven"})]})}),Object(k.jsxs)("div",{className:"bx--row landing-page__r3",children:[Object(k.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(k.jsx)(C,{title:"Temperature",fieldname:"temp",fieldunits:"\xba",data:this.state.data})}),Object(k.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(k.jsx)(C,{title:"Relative Humidity",fieldname:"rh",fieldunits:"%",data:this.state.data})}),Object(k.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(k.jsx)(D,{title:"Wind",fieldname:"wind",fieldunits:"mph",data:this.state.data})}),Object(k.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(k.jsx)(C,{title:"Rain",fieldname:"rain",fieldunits:"inches",data:this.state.data})})]})]})}}]),a}(i.Component),A=function(e){Object(d.a)(a,e);var t=Object(r.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)(E,{}),Object(k.jsx)(W.a,{children:Object(k.jsx)(I.c,{children:Object(k.jsx)(I.a,{exact:!0,path:"/",component:F})})})]})}}]),a}(i.Component),H=A;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(65),a(78),a(81),a(85),a(88);s.a.render(Object(k.jsx)(S.a,{children:Object(k.jsx)(H,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[95,1,2]]]);
//# sourceMappingURL=main.ffe75859.chunk.js.map