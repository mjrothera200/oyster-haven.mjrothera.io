(this["webpackJsonpcarbon-tutorial"]=this["webpackJsonpcarbon-tutorial"]||[]).push([[0],{154:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a(79),s=a.n(i),c=(a(92),a(6)),l=a(7),r=a(8),d=a(9),o=(a(93),a(158)),u=a(159),j=a(160),h=a(177),b=a(161),m=a(162),x=a(163),f=a(164),v=a(165),O=a(166),p=a(178),g=a(167),y=a(168),N=a(169),w=a(170),k=a(24),S=a(3),T=function(){return Object(S.jsx)(o.a,{render:function(t){var e=t.isSideNavExpanded,a=t.onClickSideNavExpand;return Object(S.jsxs)(u.a,{"aria-label":"Oyster Haven",children:[Object(S.jsx)(j.a,{}),Object(S.jsx)(h.a,{"aria-label":"Open menu",onClick:a,isActive:e}),Object(S.jsx)(b.a,{element:k.b,to:"/",prefix:"",children:"Oyster Haven"}),Object(S.jsx)(m.a,{"aria-label":"Oyster Haven",children:Object(S.jsx)(x.a,{element:k.b,to:"/trends",children:"Trends"})}),Object(S.jsx)(f.a,{"aria-label":"Side navigation",expanded:e,isPersistent:!1,children:Object(S.jsx)(v.a,{children:Object(S.jsx)(O.a,{children:Object(S.jsx)(x.a,{href:"/trends",children:"Trends"})})})}),Object(S.jsxs)(p.a,{children:[Object(S.jsx)(g.a,{"aria-label":"Notifications",children:Object(S.jsx)(y.a,{})}),Object(S.jsx)(g.a,{"aria-label":"User Avatar",children:Object(S.jsx)(N.a,{})}),Object(S.jsx)(g.a,{"aria-label":"App Switcher",children:Object(S.jsx)(w.a,{})})]})]})}})},E=a(176),W=a(22),_=a(175),C=a(179),I=a(171),P=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={},n.state={title:t.title,fieldname:t.fieldname,fieldvalue:t.fieldvalue,fieldtimestamp:t.fieldtimestamp,fieldunits:t.fieldunits,fieldextra:t.fieldextra,data:t.data,error:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("KPI mounted")}},{key:"componentWillUnmount",value:function(){console.log("KPI unmounted")}},{key:"componentWillReceiveProps",value:function(t){this.setState({data:t.data})}},{key:"timeSince",value:function(t){console.log("Timestamp: "+t);var e=new Date,a=e.getTime()/1e3-t;if(console.log("Now: "+e.getTime()),console.log("Seconds: "+a),a<60)return parseInt(a)+"s";if(a<3600)return parseInt(a/60)+"m";if(a<=86400)return parseInt(a/3600)+"h";if(a>86400)return parseInt(a/86400)+" days";if(a>86400){var n=t.getDate(),i=t.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ","");return console.log("Month: "+i),n+" "+i+(t.getFullYear()===e.getFullYear()?"":" "+t.getFullYear())}}},{key:"updateFieldValue",value:function(t,e,a){this.setState({fieldvalue:e,fieldtimestamp:a})}},{key:"update",value:function(t){if(console.log("Refreshing KPI Data"),t){console.log(this.state.data);try{var e=JSON.parse(this.state.data);if(e[this.state.fieldname]){console.log("Updating: "+this.state.fieldname);var a="Last Updated "+this.timeSince(e[this.state.fieldname].timestamp)+" ago";this.updateFieldValue(e,e[this.state.fieldname].value,a)}}catch(n){console.log("Could not parse data object")}}else console.log("KPI Data invalid")}},{key:"componentDidUpdate",value:function(t,e,a){e.data!==this.state.data&&this.update(this.state.data)}},{key:"getIcon",value:function(){return Object(S.jsx)(I.a,{})}},{key:"render",value:function(){return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"my-widget-parent",children:[Object(S.jsxs)("div",{className:"my-widget-top",children:[Object(S.jsxs)("div",{className:"my-widget-top-left",children:[Object(S.jsx)("div",{className:"my-widget-title",children:this.state.title&&Object(S.jsx)("div",{children:this.state.title})}),Object(S.jsxs)("div",{className:"my-widget-value",children:[this.state.fieldvalue&&Object(S.jsx)("div",{children:this.state.fieldvalue}),Object(S.jsx)("span",{className:"my-widget-currency",children:this.state.fieldunits&&Object(S.jsx)("div",{children:this.state.fieldunits})})]})]}),Object(S.jsx)("div",{className:"my-widget-top-right",children:this.getIcon()})]}),Object(S.jsxs)("div",{className:"my-widget-bottom",children:[Object(S.jsx)("div",{className:"my-widget-bottom-left",children:this.state.fieldtimestamp&&Object(S.jsx)("div",{children:this.state.fieldtimestamp})}),Object(S.jsx)("div",{className:"my-widget-bottom-right",children:this.state.fieldextra&&Object(S.jsx)("div",{children:this.state.fieldextra})})]})]})})}}]),a}(n.Component);P.defaultProps={title:"KPI",fieldname:"temp",fieldvalue:"N/A",fieldtimestamp:"N/A",fieldunits:"\xba",fieldextra:"",data:""};var D=a(172),A=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"updateFieldValue",value:function(t,e,a){var n=" - ",i="0";if(t.windd){var s=t.windd.value;n=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][Math.round(s/22.5,0)+1]}t.windgust&&(i=t.windgust.value);var c="".concat(n," Gusting at ").concat(i," mph");this.setState({fieldvalue:e,fieldtimestamp:a,fieldextra:c})}},{key:"getIcon",value:function(){return Object(S.jsx)(D.a,{})}}]),a}(P),F=a(173),M=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"getIcon",value:function(){return Object(S.jsx)(F.a,{})}}]),a}(P),U=a(174),L=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"getIcon",value:function(){return Object(S.jsx)(U.a,{})}}]),a}(P),R=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={data:"",value:0},n.state={data:"",value:0},n}return Object(l.a)(a,[{key:"getLatest",value:function(){var t=this;try{fetch("https://ed4b9t53ua.execute-api.us-east-1.amazonaws.com/prod/latest",{method:"GET",headers:{"x-api-key":"vbRxp5vnkT1C3sdQZHF8N3E6A7h5F3u552w4Tq3c"}}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState((function(){return{data:JSON.stringify(e)}}))}))}catch(e){console.log("Error: "+e)}}},{key:"componentDidMount",value:function(){console.log("Landing Page mounted"),this.getLatest()}},{key:"componentWillUnmount",value:function(){console.log("Landing Page unmounted")}},{key:"render",value:function(){return Object(S.jsxs)("div",{className:"bx--grid bx--grid--full-width landing-page",children:[Object(S.jsx)("div",{className:"bx--row landing-page__banner",children:Object(S.jsxs)("div",{className:"bx--col-lg-16",children:[Object(S.jsx)(_.a,{noTrailingSlash:!0,children:Object(S.jsx)(C.a,{children:Object(S.jsx)("a",{href:"/",children:"Current Conditions"})})}),Object(S.jsx)("h1",{className:"landing-page__heading",children:"Oyster Haven"})]})}),Object(S.jsxs)("div",{className:"bx--row landing-page__r3",children:[Object(S.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(S.jsx)(P,{title:"Temperature",fieldname:"temp",fieldunits:"\xba",data:this.state.data})}),Object(S.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(S.jsx)(M,{title:"Relative Humidity",fieldname:"rh",fieldunits:"%",data:this.state.data})}),Object(S.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(S.jsx)(A,{title:"Wind",fieldname:"wind",fieldunits:"mph",data:this.state.data})}),Object(S.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(S.jsx)(L,{title:"Rain",fieldname:"rainfall",fieldunits:'"',data:this.state.data})})]}),Object(S.jsx)("div",{className:"bx--row landing-page__r3",children:Object(S.jsx)("div",{className:"bx--col-md-4 bx--col-lg-4",children:Object(S.jsx)(P,{title:"Water Temperature",fieldname:"watertemp",fieldunits:"\xba",data:this.state.data})})})]})}}]),a}(n.Component),H=a(82),Y=a.n(H),K=a(85),J=a(83),z=a(20),G=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={data:[{x:0,y:0}],hints:[]},n._onMouseLeave=function(){},n._onNearestX=function(t,e){e.index},n.state={title:t.title,yunits:t.yunits,data:t.data,hints:t.hints,xtitle:t.xtitle,ytitle:t.ytitle,error:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("Trend Chart mounted")}},{key:"componentWillUnmount",value:function(){console.log("Trend Chart unmounted")}},{key:"componentWillReceiveProps",value:function(t){this.setState({data:t.data,hints:t.hints,xtitle:t.xtitle,ytitle:t.ytitle,yunits:t.yunits})}},{key:"render",value:function(){var t=this;return Object(S.jsxs)(z.a,{height:300,xType:"time",children:[Object(S.jsx)(z.c,{}),Object(S.jsx)(z.e,{}),Object(S.jsx)(z.f,{title:this.state.xtitle}),Object(S.jsx)(z.g,{title:this.state.ytitle}),Object(S.jsx)(z.d,{data:this.state.data}),this.state.hints.map((function(e,a){return Object(S.jsx)(z.b,{value:e[e.type],children:Object(S.jsxs)("div",{className:"hint",children:[Object(S.jsx)("div",{children:Object(S.jsx)(J.a,{icon:K.a})}),Object(S.jsxs)("div",{children:[e[e.type].y," ",t.state.fieldunits]}),Object(S.jsx)("div",{children:Y()(e[e.type].x).format("MM-DD-YYYY h:mm:ss")})]})},e[e.type].x)}))]})}}]),a}(n.Component);G.defaultProps={title:"Trend Chart",xtitle:"N/A",ytitle:"N/A",yunits:"\xba",data:[{x:0,y:0}],hints:[]};var V=G,Z=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={data:[{x:0,y:0}],hints:[],yunits:"",xtitle:"",ytitle:""},n.state={data:[{x:0,y:0}],hints:[],yunits:"",xtitle:"",ytitle:""},n}return Object(l.a)(a,[{key:"getTrends",value:function(){var t=this;try{var e=new URL("https://ed4b9t53ua.execute-api.us-east-1.amazonaws.com/prod/historical"),a={measure:"watertemp",timeframe:1};Object.keys(a).forEach((function(t){return e.searchParams.append(t,a[t])})),fetch(e,{method:"GET",headers:{"x-api-key":"vbRxp5vnkT1C3sdQZHF8N3E6A7h5F3u552w4Tq3c"}}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState((function(){return{data:e.dataset,hints:e.hints,ytitle:e.metadata.ytitle,yunits:e.metadata.yunits,xtitle:"Month to Date"}}))}))}catch(n){console.log("Error: "+n)}}},{key:"componentDidMount",value:function(){console.log("TrendsPage mounted"),this.getTrends()}},{key:"componentWillUnmount",value:function(){console.log("Trends Page unmounted")}},{key:"render",value:function(){return Object(S.jsxs)("div",{className:"bx--grid bx--grid--full-width trends-page",children:[Object(S.jsx)("div",{className:"bx--row trends-page__banner",children:Object(S.jsx)("div",{className:"bx--col-lg-16",children:Object(S.jsx)("h1",{className:"trends-page__heading",children:"Latest Trends"})})}),Object(S.jsx)("div",{className:"bx--row trends-page__r3",children:Object(S.jsx)(V,{title:"Temperature",yunits:this.state.yunits,ytitle:this.state.ytitle,xtitle:this.state.xtitle,data:this.state.data,hints:this.state.hints})}),Object(S.jsx)("div",{className:"bx--row trends-page__r3"})]})}}]),a}(n.Component),q=function(t){Object(r.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(T,{}),Object(S.jsx)(E.a,{children:Object(S.jsxs)(W.c,{children:[Object(S.jsx)(W.a,{exact:!0,path:"/",component:R}),Object(S.jsx)(W.a,{path:"/trends",component:Z})]})})]})}}]),a}(n.Component),B=q;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(124),a(137),a(140),a(144),a(147);s.a.render(Object(S.jsx)(k.a,{children:Object(S.jsx)(B,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},92:function(t,e,a){},93:function(t,e,a){}},[[154,1,2]]]);
//# sourceMappingURL=main.3c3a2665.chunk.js.map